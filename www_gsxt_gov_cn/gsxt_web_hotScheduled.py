# -*- coding: utf-8 -*-

import collections
import requests
import re
import sys
import urllib.parse

"""
    工商热搜榜  
        拿到 gsxt_web_test 拼接的cookie 即可
    
"""


def str_to_dict(headerStr):
    rdict = dict()
    if headerStr.strip():
        for headItem in headerStr.split("\n"):
            parm = headItem.split(":", 1)  # 切分2
            if parm[0].strip():
                rdict[parm[0].strip()] = headItem[(headItem.index(parm[0]) + parm[0].__len__() + 1):].strip()
            # rdict[parm[0].strip()] = parm[1].strip()
    return rdict


# headers = str_to_dict("""
# Host: www.gsxt.gov.cn
# Connection: keep-alive
# User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3970.5 Safari/537.36
# Accept: */*
# Referer: http://www.gsxt.gov.cn/index.html
# Accept-Encoding: gzip, deflate
# Accept-Language: zh-CN,zh;q=0.9
# Cookie: __jsluid_h=1ca071a7cfb9da8dc547fa432521d93b; __jsl_clearance=1578300862.463|0|XZKiDbVrsoY7tmvYAhhTEmjdzLM%3D; SECTOKEN=7058202503142965467; JSESSIONID=1C27A1A3645D4996650194523F60E0DD-n1:-1; tlb_cookie=S172.16.12.116
# """)

headers = {'Host': 'www.gsxt.gov.cn', 'Connection': 'keep-alive',
           'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3970.5 Safari/537.36',
           'Accept': '*/*', 'Referer': 'http://www.gsxt.gov.cn/index.html', 'Accept-Encoding': 'gzip, deflate',
           'Accept-Language': 'zh-CN,zh;q=0.9',
           'Cookie': '__jsluid_h=83c9f1776b55cc55de282f73a5693a9e;__jsl_clearance=1578301869.646|0|mgTdkCj9bPMo0SSMzbsBe5o5EkA%3D;JSESSIONID=7DCFE4C102CFD9E76B3F36E270E8445D-n1:-1; SECTOKEN=7058259673846910264;tlb_cookie=S172.16.12.71'}
# __jsluid_h=1ca071a7cfb9da8dc547fa432521d93b; __jsl_clearance=1578300862.463|0|XZKiDbVrsoY7tmvYAhhTEmjdzLM%3D; SECTOKEN=7058202503142965467; JSESSIONID=1C27A1A3645D4996650194523F60E0DD-n1:-1; tlb_cookie=S172.16.12.116  ok
# __jsluid_h=0a56103c9f8210ec26f5b5e62d3d6950; __jsl_clearance=1578297179.917|0|At%2BVITtfXhuL5y%2BdO%2F6NA3WYMO8%3D;JSESSIONID=38217B642910C48EAFD31D1BE72FE079-n2:-1;SECTOKEN=7058206552596677561;tlb_cookie=S172.16.12.67 no
# __jsluid_h,   __jsl_clearance

print('headers', headers)

# sys.exit()

# __jsluid_h=2c555711a33c17bfabac0351628c011f; SECTOKEN=7046988750317683614; UM_distinctid=16f5a7c476372-0245007d9056eb-6a547d2e-1fa400-16f5a7c476449a; tlb_cookie=S172.16.12.114; gsxtBrowseHistory3=%0FS%04%06%1D%04%1D%10SNS%24%26%3B%22%3D%3A71%3A%3B01%3A%219%40%40DDDD%40%40DGDEDDEDEFDEBDAFDEGCG%2CSXS%11%1A%00%1A%15%19%11SNS%E6%B6%85%E5%9D%87%E5%B9%B6%E6%97%84%E8%88%8E%E9%9B%B2%E7%A6%A5%E6%8B%B4%E6%9D%BD%E9%98%A4%E5%84%98%E5%8E%8CSXS%11%1A%00%00%0D%04%11SNEEAEXS%02%1D%07%1D%00%00%1D%19%11SNEACCCCMCBFCDL%09; CNZZDATA1261033118=1472937247-1577768846-http%253A%252F%252Fwww.gsxt.gov.cn%252F%7C1578276482; gsxtBrowseHistory2=%0FS%04%06%1D%04%1D%10SNS%24%26%3B%22%3D%3A71%3A%3B01%3A%219%40%40DDDD5DGEALASXS%11%1A%00%1A%15%19%11SNS%E5%8C%BA%E4%B9%8E%E6%8B%B4%E6%9D%9B%E6%9D%BD%E9%98%A4%E5%84%98%E5%8E%8CSXS%11%1A%00%00%0D%04%11SNEEAFXS%02%1D%07%1D%00%00%1D%19%11SNEACCCL%40LLCF%40D%09; gsxtBrowseHistory4=%0FS%04%06%1D%04%1D%10SNS%24%26%3B%22%3D%3A71%3A%3B01%3A%219GFDDDDGFEDDDDDDDDDD%40FDCMLB%40SXS%11%1A%00%1A%15%19%11SNS%E6%88%98%E5%B6%AA%E5%8C%BA%E4%B9%8E%E6%B0%89%E8%BC%92%E6%8B%A1%E8%B4%B0%E7%AF%95%E7%91%B2%E6%9D%BD%E9%98%A4%E5%84%98%E5%8E%8CSXS%11%1A%00%00%0D%04%11SNEEAFXS%02%1D%07%1D%00%00%1D%19%11SNEACCCCDCAM%40GC%09; gsxtBrowseHistory1=%0FS%04%06%1D%04%1D%10SNS%24%26%3B%22%3D%3A71%3A%3B01%3A%219EFDDDDA%12%16C%12MEMAG%11%11L%15G%17DD%10GL%12E%15LLDG%10AFASXS%11%1A%00%1A%15%19%11SNS%E5%8D%A3%E6%97%8D%E5%9A%89%E9%98%B1%E4%BE%95%E6%88%AC%E8%83%95%E4%BA%89%E6%9D%BD%E9%98%A4%E5%84%98%E5%8E%8CSXS%11%1A%00%00%0D%04%11SNEFDDXS%02%1D%07%1D%00%00%1D%19%11SNEACLFCLA%40FMLL%09; gsxtBrowseHistory5=%0FS%04%06%1D%04%1D%10SNS%24%26%3B%22%3D%3A71%3A%3B01%3A%219EFDDDDA%17ALEG%11BAG%11%11L%15FLAGA%16L%12%15%12CDCF%17GCBSXS%11%1A%00%1A%15%19%11SNS%E5%A5%9D%E6%B5%91%E5%9E%BA%E5%BA%8E%E9%9A%B2%E5%9A%96%E6%9D%BD%E9%98%A4%E5%84%98%E5%8E%8C%E6%B6%83%E5%86%A9%E5%9D%AB%E5%84%98%E5%8E%8CSXS%11%1A%00%00%0D%04%11SNFEDDXS%02%1D%07%1D%00%00%1D%19%11SNEACLFCM%40ML%40LE%09; JSESSIONID=BDD6E689A83ACD57482A1F88FF09581A-n2:19; __jsl_clearance=1578293288.964|0|yLKTkewDS0v78se%2BN2qLprFPGYM%3D
url = "http://www.gsxt.gov.cn/js/hotScheduled.js"

# proxies = {"http": "https://" + ip, "https": "https://" + ip}
# , proxies=proxies
# res = requests.post(url, headers=headers, data=data, verify=False, proxies=proxies)

# print(urllib.parse.urlencode(data))
# res = requests.post(url, headers=headers, data=data.encode("utf-8"), verify=False)
res = requests.get(url, headers=headers, verify=False)
print(res.encoding)
print(res.apparent_encoding)
print(res.content.decode('utf-8'))
# print(res.content)
print(res.status_code)
print(res.cookies)

"""
var hotSearchData = [{"pripid":"/%7B7944AC1C11650DCEE2526B1F33B98F8232900C2054F67CC0285C51E14324E5556CCE44F81064F83BE9E427F56950CCB833038CAC478DF1F933BC949C569291F597CF97CF97DFE2AA5D39705C763E775B77804123D49CD59D4FB804C579762E21437E373812FE586E090EE3CF4573FAC3CEE27B197D257DA09657851C30BA8CCEF839EB36AA69BB2785B39F06623A623A623A-1578297603008%7D","entname":"天津城建集团有限公司混凝土公司"},
{"pripid":"/%7BDDE108B9B5C0A96B46F7CFBA971C2B279635A885F053D8658CF9F544E78141F0C86BE05DB4C15C9E4D418350CDF5681D97A62809E328555C97193039F2373550336A336A337AA9F0A9CA0ACA93DA92BF9264A4ECD089D0ECA4197C1FA246B44269A9E1CAC4298EB9DFD9351893A42C141835ADC8ADF4AD71468655CDE06B5C1F28E83BE77AB86BF655624FD7B2EBB2EBB2EB-1578297603009%7D","entname":"天津泰达投资控股有限公司"},
{"pripid":"/%7B7C40A918146108CAE7566E1B36BD8A863794092451F279C42D5854E54620E05169CA41FC1560FD3FECE022F16C54C9BC360789A84289F4FD36B89198539694F192CB92CB92DA88EB8E6A22705D145C715CAA6A221E471E561E47876348000EF8D3818FA254B91E294F49A5880334BC8488A53D583D5801DDEA2AF9614CC7F0B38444974BD614C75AF9CEE37B1E471E471E47-1578297603009%7D","entname":"天津海泰控股集团有限公司"},
{"pripid":"/%7B211DF445493C5597BA0B33466BE0D7DB6AC954790CAF2499700509B81B7DBD0C34971CA1483DA062B1BD7FAC310994E16B5AD4F51FD4A9A06BE5CCC50ECBC9ACCF96CF96CF863BE8E65B096C3E773F123FC909417D247D99D1279AFF3FC93F662ECA83E0A944E3D4B2B45875FEC941797558C0A5C69FC61A2DED3EA68B0037744383508C11D3009D3E0924BCD980D980D980-1578297603009%7D","entname":"北方国际信托股份有限公司"},
{"pripid":"/%7BDDE108B9B5C0A96B46F7CFBA971C2B279635A885F053D8658CF9F544E78141F0C86BE05DB4C15C9E4D418350CDF5681D97A62809E328555C97193039F2373550336A336A33C578557E88C125E5ACE4C9E412D29BC29BC2E98CC5377FC2E91BEDC67B476AD73A9DAACCCA260B80B73F070B26BE95F0B9E03C0BCB1880AD26115265A576AA37F526BB182F029AFFA6FFA6FFA6-1578297603009%7D","entname":"中汇融通国际融资租赁（天津）有限公司"},
{"pripid":"/%7B122EC7767A0F66A48938007558D3E4E859FA674A3F9C17AA43363A8B284E8E3F07A42F927B0E9351828E4C9F023AA7D25869E7C62CE79A9358D6FFF63DF8FA9FFCA5FCA5FC0ECEE3B19AC8AD80C981AC8177B7FFC39AC39A49BBF2FC2F9252A0521A7F9BC92483B4D2D438159EA921191538A0E91F461FC3F434E77F52D9EEAD9A5A8955C80AD944E7D0FD65005900590059-1578297603009%7D","entname":"上海诺基亚贝尔股份有限公司天津分公司"},
{"pripid":"/%7BC6F913A1AED8B2735DEFD4A28C04303F8D2DB39DEB4BC37D97E1EE5CFC995AE8D373FB45AFD9478656599848D6ED73058CBE3311F8304E448C012B21E92F2E482872287228DDD0B04548284E4380BFD9BFB2BF580258026293D909EE1F3751376D0D32D5D83692A6C3C629078FBB300B042AB1D7B1FB9B4470B363F8D65E6A2A1EDD0DD24C8D5DC3635779E284DE84DE84DE-1578297603010%7D","entname":"天津华纺水务有限公司"},
{"pripid":"/%7BD9E60CBEB1C7AD6C42F0CBBD931B2F209232AC82F454DC6288FEF143E38645F7CC6CE45AB0C6589949468757C9F26C1A93A12C0EE72F515B931E343EF6303157376D376D3719DA0A07C4FB2BDA90DBF5DB2EEDA699C399C88277488BDA80CAAC1258A9A48C62C6F297927D53DBEF645F507EE583E5AFCF1024E737AC820A3E7E4A89598618D9099737032DB6D08AD08AD08A-1578297603010%7D","entname":"天津津港水务有限公司"},
{"pripid":"/%7B112EC476790F65A48A3803755BD3E7E85AFA644A3C9C14AA4036398B2B4E8D3F04A42C92780E9051818E4F9F013AA4D25B69E4C62FE799935BD6FCF63EF8F99FFFA5FFA5FFC0317A1A173F6E89C388A6887DBED8294944246F0F6922E114725C636E6328729C380C696C83AD25119AA1AE801B7D1B5131EEDA19C9527CF4C080B477A778E627F769C9FDD3482E742E742E74-1578297603010%7D","entname":"天津水务集团滨海水务有限公司"}]
"""
